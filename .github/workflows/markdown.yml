# Copyright 2025 SAP SE or an SAP affiliate company
#
# SPDX-License-Identifier: Apache-2.0

name: markdown

on:
  push:
    branches:
      - main
jobs:
  generate-markdown:
    runs-on: ubuntu-latest
    container:
      image: quay.io/goswagger/swagger
    steps:
    - name: Install git
      run: apk add --no-cache git
    - uses: actions/checkout@v4
      with:
        fetch-depth: 0
    - name: Build
      run: swagger generate markdown --copyright-file COPYRIGHT.txt --output docs/api.md
    - name: Create Pull Request
      uses: peter-evans/create-pull-request@v7
      with:
        commit-message: Update docs/api.md
        title: Update docs/api.md
        body: Update docs/api.md due to changes in the API
        branch: update-apidocs

